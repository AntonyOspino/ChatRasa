stories:
- story: Test successful login and diagnosis
  steps:
  - user: | hola
    intent: saludar
  - action: utter_saludar
  - action: utter_ask_login
  - user: | usuario: carlos.rod, contraseña: clave456
    intent: login
  - action: action_process_login
  - slot_was_set:
    - rol
  - action: utter_login_success
  - action: diagnosis_form
  - active_loop: diagnosis_form
  - user: | sí
    intent: responder_si
  - action: diagnosis_form
  - user: | no
    intent: responder_no
  - action: diagnosis_form
  - user: | sí
    intent: responder_si
  - action: diagnosis_form
  - user: | no
    intent: responder_no
  - action: diagnosis_form
  - user: | sí
    intent: responder_si
  - action: diagnosis_form
  - active_loop: null
  - action: action_submit_diagnosis
  - action: utter_diagnosis_result
- story: Test failed login
  steps:
  - user: | hola
    intent: saludar
  - action: utter_saludar
  - action: utter_ask_login
  - user: | usuario: invalid, contraseña: wrong
    intent: login
  - action: action_process_login
  - slot_was_set:
    - rol: null
  - action: utter_login_failed
- story: Test diagnosis failure
  steps:
  - user: | hola
    intent: saludar
  - action: utter_saludar
  - action: utter_ask_login
  - user: | usuario: carlos.rod, contraseña: clave456
    intent: login
  - action: action_process_login
  - slot_was_set:
    - rol
  - action: utter_login_success
  - action: diagnosis_form
  - active_loop: diagnosis_form
  - user: | sí
    intent: responder_si
  - action: diagnosis_form
  - user: | no
    intent: responder_no
  - action: diagnosis_form
  - user: | sí
    intent: responder_si
  - action: diagnosis_form
  - user: | no
    intent: responder_no
  - action: diagnosis_form
  - user: | sí
    intent: responder_si
  - action: diagnosis_form
  - active_loop: null
  - action: action_submit_diagnosis
  - action: utter_diagnosis_failed
- story: Test interruption during questions
  steps:
  - user: | hola
    intent: saludar
  - action: utter_saludar
  - action: utter_ask_login
  - user: | usuario: carlos.rod, contraseña: clave456
    intent: login
  - action: action_process_login
  - slot_was_set:
    - rol
  - action: utter_login_success
  - action: diagnosis_form
  - active_loop: diagnosis_form
  - user: | ¿cómo está el clima?
    intent: preguntar_clima
  - action: utter_preguntar_clima
  - action: diagnosis_form